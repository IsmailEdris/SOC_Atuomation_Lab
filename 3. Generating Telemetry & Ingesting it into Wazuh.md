# Objective

The objective of this step is to generate and ingest telemetry from the Windows 10 client machine into the Wazuh server for monitoring and analysis. As part of this process, Wazuh was configured to receive telemetry data, which included activity from Mimikatz. Custom alerts for Mimikatz-related events were successfully triggered, demonstrating Wazuh's ability to detect and respond to potential security threats.

## Step 1:  Configuring Sysmon to Report to Wazuh Dashboard

The objective of this step is to configure Sysmon on the Windows machine to report its telemetry to the Wazuh dashboard. This was achieved by updating the `ossec.conf` file on the Windows client to include the Sysmon log location, followed by restarting the Wazuh service to apply the changes.



### Steps Performed

### 1. Updated the `ossec.conf` File
The `ossec.conf` file on the Windows client was configured to include the Sysmon event log location. This ensures that Sysmon's operational telemetry is sent to the Wazuh server for monitoring.

![afdaf](https://i.imgur.com/tGpuI6I.png)

#### Configuration Added to the `ossec.conf` File:
```xml
<localfile>
  <location>Microsoft-Windows-Sysmon/Operational</location>
  <log_format>eventchannel</log_format>
</localfile>

```

### 2. Restarted the Wazuh Service
After updating the `ossec.conf` file, the Wazuh service on the Windows client was restarted to apply the new configuration.

### 3. Verification

After completing the steps, the Windows agent appeared in the Wazuh management interface, confirming successful registration and communication with the server.

![adfa](https://i.imgur.com/zOp2YHn.png)

Sysmon has been successfully integrated with Wazuh. The Windows client now sends Sysmon telemetry to the Wazuh server, enhancing visibility into system activity and enabling detailed monitoring and analysis.

## Step 2. Configuring Wazuh to Archive and Ingest Logs

This step involved configuring Wazuh to enable JSON logging and to archive all logs, ensuring that activities such as Mimikatz is properly logged and archived for future analysis. A backup of the `ossec.conf` file was created before making changes. Additionally, the Filebeat configuration was updated to support archiving, and the Filebeat service was restarted to apply the changes.

---

## Steps Performed

### 1. Backed Up the `ossec.conf` File
To ensure that the original configuration could be restored if needed, the `ossec.conf` file was backed up using the following command:

```bash
cp /var/ossec/etc/ossec.conf ~/ossec-backup.conf
```

### 2. Configured the `ossec.conf` File
The `ossec.conf` file was edited to enable JSON logs and archive all logs. These changes ensure that Wazuh captures detailed activity logs, such as those related to Mimikatz, and archives them for future analysis.

#### Changes Made:
- Enabled JSON logging to allow for better log structure and readability.
- Configured Wazuh to archive all logs, ensuring activity logs are stored for long-term analysis.

![afda](https://i.imgur.com/3mB8dCa.png)

Archived logs are stored in the following directory:
```bash
/var/ossec/logs/archives

```

### 3. Updated Filebeat Configuration
The Filebeat configuration was edited to enable log archiving, ensuring Wazuh archives all logs for future analysis.

#### Changes Made:
- The `enable_archives` value in the Filebeat configuration file was changed from `false` to `true`.


![afaf](https://i.imgur.com/S5QjSDE.png)


#### Updated Configuration:
```yaml
enable_archives: true



